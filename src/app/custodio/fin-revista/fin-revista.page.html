<ion-header>
    <ion-toolbar color="dark">
        <ion-buttons slot="start">
            <ion-back-button color="light"></ion-back-button>
        </ion-buttons>
        <ion-title>Finalizar Revista</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" color="light">
    <form [formGroup]="finRevista">
        <div formArrayName="observaciones">
            <ion-card *ngFor="let item of getObservaciones(finRevista); let i = index;">
                <ion-card-content [formGroupName]="i">
                    <ion-grid>
                        <ion-row>
                            <ion-col size="12">
                                <ion-item>
                                    <ion-label position="floating">Observacion</ion-label>
                                    <ion-textarea formControlName="observacion"></ion-textarea>
                                </ion-item>
                            </ion-col>
                            <ion-col *ngIf="item.get('foto').value != ''" size="12">
                                <img [src]="item.get('foto').value" style="max-height: 150px;">
                            </ion-col>
                            <ion-col size="12">
                                <ion-button expand="block" color="dark" (click)="openGalleryGeneric(i)">Subir Foto</ion-button>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                    <br>
                    <ion-button expand="block" color="danger" (click)="removeObservacion(i)" *ngIf="getObservaciones(finRevista).length > 1">Elimnar Observacion</ion-button>
                </ion-card-content>
            </ion-card>

        </div>
        <br>
        <div style="padding: 10px;">
            <ion-button expand="block" color="secondary" (click)="addObservcion()">Agregar Observacion</ion-button>
            <ion-button expand="block" color="primary" (click)="guardarObservaciones()">Finalizar Revista</ion-button>
        </div>
    </form>
</ion-content>